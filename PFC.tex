%% abtex2-modelo-trabalho-academico.tex, v-1.9.3 laurocesar
%% Copyright 2012-2015 by abnTeX2 group at http://abntex2.googlecode.com/
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The Current Maintainer of this work is the abnTeX2 team, led
%% by Lauro César Araujo. Further information are available on
%% http://abntex2.googlecode.com/
%%
%% This work consists of the files abntex2-modelo-trabalho-academico.tex,
%% abntex2-modelo-include-comandos and abntex2-modelo-references.bib
%%

% ------------------------------------------------------------------------
% ------------------------------------------------------------------------
% abnTeX2: Modelo de Trabalho Academico (tese de doutorado, dissertacao de
% mestrado e trabalhos monograficos em geral) em conformidade com
% ABNT NBR 14724:2011: Informacao e documentacao - Trabalhos academicos -
% Apresentacao
% ------------------------------------------------------------------------
% ------------------------------------------------------------------------

\documentclass{include/ufscThesis}
	% -- opções da classe memoir --
	% 12pt,				% tamanho da fonte
	% openright,			% capítulos começam em pág ímpar (insere página vazia caso preciso)
	% twoside,			% para impressão em verso e anverso. Oposto a oneside
	% a4paper,			% tamanho do papel.
	% -- opções da classe abntex2 --
	%chapter=TITLE,		% títulos de capítulos convertidos em letras maiúsculas
	%section=TITLE,		% títulos de seções convertidos em letras maiúsculas
	%subsection=TITLE,	% títulos de subseções convertidos em letras maiúsculas
	%subsubsection=TITLE,% títulos de subsubseções convertidos em letras maiúsculas
	% -- opções do pacote babel --
	% english,			% idioma adicional para hifenização
	% brazil				% o último idioma é o principal do documento

% ---
% Pacotes básicos
% ---
% \usepackage{times}				% Usa a fonte Latin Modern			lmodern
% \usepackage{mathptmx}
% \usepackage{pslatex}
% \usepackage[T1]{fontenc}		% Selecao de codigos de fonte.
% \usepackage{sbc-template}
% \usepackage[utf8]{inputenc}		% Codificacao do documento (conversão automática dos acentos)
% \usepackage{fontspec}		% Selecao de codigos de fonte.
% \usepackage[utf8]{inputenc}		% Codificacao do documento (conversão automática dos acentos)
% \setmainfont{Times New Roman}
% \usepackage{lastpage}			% Usado pela Ficha catalográfica
% \usepackage{indentfirst}		% Indenta o primeiro parágrafo de cada seção.
% \usepackage{color}				% Controle das cores
\usepackage{graphicx}			% Inclusão de gráficos
% \usepackage{microtype} 			% para melhorias de justificação
% \usepackage{biblatex}
\usepackage{chngcntr}
\usepackage{xspace}
\usepackage{pgfgantt}
\usepackage{adjustbox}
\usepackage{pdfpages}
\usepackage[labelsep=endash]{caption}
\usepackage{subfigure}
% pacotes adicionados
% \usepackage{amsmath}
% \usepackage{amssymb,amsfonts,amsthm}
\usepackage{url}
\usepackage[acronym,nopostdot,nonumberlist]{glossaries}

% \usepackage{color}
% \usepackage{caption}
% Code Snippets
\usepackage{listings}
\renewcommand{\lstlistingname}{Código}
\lstset{
    basicstyle=\scriptsize\ttfamily,
	numbers=left,
	stepnumber=1,
	numbersep=-0.75em,
	keywordstyle=\color{blue},
	commentstyle=\color{black},
	stringstyle=\color{black},
    numberstyle=\scriptsize\ttfamily\color{black},
	frame=single,
	tabsize=2,
	float,
	language=C++,
	captionpos=t,
	showstringspaces=false,
	backgroundcolor=\color{white},
	morekeywords = {Array2D, __parallel__, Mask2D, Stencil2D},
	emph={
		pragma,
		omp,
		parallel,
		reduction,
		schedule,
		private,
		shared
	},
	emphstyle={\color{blue}}%
}


% \newglossarystyle{dotglos}{%
%     \setglossarystyle{list}%
%     \renewcommand*{\glossentry}[2]{%
%     \item[\glsentryitem{##2}\glstarget{##1}{\glossentryname{##1}}]
%         \ifglshassymbol{##1}{[\glossentrysymbol{##1}]\quad}{}%
%         \glossentrydesc{##1}%
%         \unskip\leaders\hbox to 2.9mm{\hss.}\hfill##2}%
%     \renewcommand*{\glsgroupskip}{}%
% }
%
% \setglossarystyle{dotglos}
% ---

\newglossarystyle{mystyle}{%
    \setglossarystyle{list}% base this style on the list style
    \renewcommand*{\glossentry}[2]{%
    \item[\glsentryitem{##1}%
        \glstarget{##1}{\glossentryname{##1} --}]
        \glossentrydesc{##1}\glspostdescription\space ##2}
}

\setglossarystyle{mystyle}
% ---
% Pacotes adicionais, usados apenas no âmbito do Modelo Canônico do abnteX2
% ---
% \usepackage{lipsum}				% para geração de dummy text
% ---
\usepackage{todonotes}
% ---
% Pacotes de citações
% ---
% \usepackage[brazilian,hyperpageref]{backref}	 % Paginas com as citações na bibl
% \usepackage[alf]{abntex2cite}	% Citações padrão ABNT


\renewcommand{\bf}[1]{\mathbf{#1}}
\renewcommand{\rm}[1]{\mathrm{#1}}


% \usepackage{cite}
% \renewcommand\citeleft{[}
% \renewcommand\citeright{]}

% ---
% CONFIGURAÇÕES DE PACOTES
% ---
% \renewcommand{\imprimircapa}{
% \include{modelocapa}}


% \renewcommand{\imprimirfolhaderosto}{
% \include{folhaderosto}}


% ---
% Configurações do pacote backref
% Usado sem a opção hyperpageref de backref
% \renewcommand{\backrefpagesname}{Citado na(s) página(s):~}
% Texto padrão antes do número das páginas
% \renewcommand{\backref}{}
% Define os textos da citação
% \renewcommand*{\backrefalt}[4]{
	% \ifcase #1 %
		% Nenhuma citação no texto.%
	% \or
		% Citado na página #2.%
	% \else
		% Citado #1 vezes nas páginas #2.%
	% \fi}%
% ---
% \include{capa}

% ---
% Configurações de aparência do PDF final
\newcommand{\Fw}{\textit{Framework}\xspace}
\newcommand{\fw}{\textit{framework}\xspace}
\newcommand{\Fws}{\textit{Frameworks}\xspace}
\newcommand{\fws}{\textit{frameworks}\xspace}

\newcommand{\pskel}{PSkel\xspace}
\newcommand{\mppa}{MPPA-256\xspace}
\newcommand{\stencil}{\textit{stencil}\xspace}
\newcommand{\etal}{\textit{et al.\ }}

\newcommand{\kb}{KB\xspace}
\newcommand{\mb}{MB\xspace}
\newcommand{\gb}{GB\xspace}

% alterando o aspecto da cor azul
\definecolor{blue}{RGB}{41,5,195}

% informações do PDF
% \makeatletter
% \hypersetup{
%      	%pagebackref=true,
% 		colorlinks=true,       		% false: boxed links; true: colored links
%     	linkcolor=black,          	% color of internal links
%     	citecolor=black,        		% color of links to bibliography
%     	filecolor=magenta,      		% color of file links
% 		urlcolor=blue,
% 		bookmarksdepth=4
% }



% \makeatother
% ---

% ---
% Espaçamentos entre linhas e parágrafos
% ---

% O tamanho do parágrafo é dado por:
% \setlength{\parindent}{1.3cm}

% Controle do espaçamento entre um parágrafo e outro:
% \setlength{\parskip}{0.2cm}  % tente também \onelineskip
\input{acronyms.tex}
% ---
% compila o indice
% ---
\makeindex
% ---

% Prepara acrônimos.
\makenoidxglossaries

% ---
% compila o indice
% ---
% \makeindex
% ---

% ----
% Início do documento
% ----
% \begin{document}

% Seleciona o idioma do documento (conforme pacotes do babel)
%\selectlanguage{english}
% \selectlanguage{brazil}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Identificadores do trabalho
% Usados para preencher os elementos pré-textuais
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\titulo{PSKEL-MPPA}
\subtitulo{UMA ADAPTAÇÃO DO \textit{FRAMEWORK} PSKEL PARA O PROCESSADOR
    \textit{MANYCORE} MPPA-256}                % Subtitulo do trabalho
\autor{Emmanuel Podestá Junior}           % Nome do autor
\data{01}{julho}{2018}                           % Data da publicaçăo do

\orientador{Prof. Dr. Márcio Bastos Castro \\ Universidade Federal de Santa
    Catarina}                    % Nome do orientador e
\coordenador{Prof. Dr. Renato Cislaghi \\ Universidade Federal de Santa Catarina}              % Nome do coordenador do curso
\coorientador{Prof. Dr. Laércio Lima Pilla}     % Nome do membro da Banca


%\departamento[a]{Faculdade de Cięncias do Mar}
%\curso[a]{Atividade de Extensăo em Corte e Costura}


%%% Sobre a Banca
\numerodemembrosnabanca{2} % Isso decide se haverá uma folha adicional
\orientadornabanca{sim} % Se faz parte da banca definir como sim
\coorientadornabanca{sim} % Se faz parte da banca definir como sim

\bancaMembroB{Prof. Dr. Frank Augusto Siqueira \\ Universidade Federal de Santa
Catarina}       % Nome do membro da Banca

\agradecimento{Agradeço a todos que contribuíram de alguma forma para a
    realização do presente Trabalho de Conclusão de Curso. Em especial, agradeço
    meu orientador, Márcio Bastos Castro, e os colegas do grupo de pesquisa que
    estiveram envolvidos diretamente no presente trabalho. Também agradeço ao
    Conselho Nacional de Desenvolvimento Científico e Tecnológico (CNPq) pela
    concessão da bolsa de Iniciação Científica (PIBIC), cujas atividades
    relacionadas fomentaram o desenvolvimento deste trabalho.}

\epigrafe{"Whether you think that you can, or that you can't, you are usually
    right."}{Henry Ford (1863-1947)}

\textoResumo {
Aplicações paralelas podem ser classificadas de acordo com o padrão de
computação e coordenação. Dentre os padrões mais conhecidos destacam-se o
\textit{map}, \textit{reduce}, \textit{pipeline}, \textit{scan} e \stencil.
Este último é muito utilizado em diversas áreas, como
simulação física de partículas, previsão meteorológica, termodinâmica, resolução de
funções diferenciais, manipulação de imagens, entre outras. O \pskel é um \fw de
programação paralela desenvolvido para simplificar o desenvolvimento de
aplicações que seguem o padrão \stencil. Utilizando uma abstração de alto nível, o
programador define o \emph{kernel} da computação, enquanto o \fw se encarrega de
executar a computação paralela em \textit{multicores} e em \textit{Graphics Processing Units}
(GPUs) de maneira eficiente.
%
O objetivo deste trabalho é propor uma adaptação do \textit{framework} \pskel
para o processador \textit{manycore} emergente \mppa, batizada de \pskel-MPPA. A
motivação para tal adaptação está relacionada à dificuldade de desenvolvimento
de aplicações do padrão \textit{stencil} para o \mppa, tendo em vista as suas
características arquiteturais intrínsecas que tornam o desenvolvimento de
aplicações paralelas onerosas e suscetíveis a erros.
A adaptação do \fw permite simplificar o desenvolvimento de
aplicações \stencil para o \mppa, escondendo do desenvolvedor detalhes de
implementação, tais como a necessidade de comunicação explícita entre as memórias
do \textit{chip} e a distribuição de computações entre os núcleos de processamento.
%
Diversos experimentos foram efetuados com a solução proposta para o \mppa, comparando-a
com a solução para \textit{multicores} já existente. Os resultados mostraram que a solução
proposta para o \mppa permite reduzir o consumo de energia das aplicações \stencil
em até 1.45x apesar de apresentar uma perda de desempenho de até 3.3x.
}

\palavrasChave {\textit{manycores}, \mppa, \textit{stencil}, PSkel.}

\textAbstract { Parallel applications can be classified according to computation
    and coordination patterns. Among the most well-known patterns are the map,
    reduce, pipeline, scan and stencil. The latter is widely used in
    several areas, such as physical particle simulation, weather forecasting,
    thermodynamics, resolution of differential functions, manipulation of
    images, among others. \pskel is a parallel programming framework
    designed to simplify the development of applications that follow the stencil
    pattern. Using a high level abstraction, the programmer defines the
    compute kernel, while the framework executes the parallel computation
    efficiently on multicores and on Graphic Processing Units (GPUs).
    The objective of this work is to propose an adaptation of the \pskel
    framework for the emerging manycore processor \mppa, called \pskel-MPPA. The
    motivation for such work is related to the difficulty of developing  parallel
    stencil applications on \mppa. The intrinsic architectural
    features of \mppa make the development of efficient parallel applications a costly and error-prone task.
    The framework adaptation allows to simplify the development of stencil
    applications for \mppa, hiding implementations details from the developer,
    such as the need for explicit communication between on-chip memories and
    task distribution between processing cores.
    Several experiments were carried out with the proposed solution for the
    \mppa, comparing it to the existing multicore counterpart. The results showed that
    the proposed solution allows to reduce energy consumption of stencil applications
    in up to 1.45x, despite the performance loss of up to 3.3x.}

\keywords {manycores, \mppa, stencil, PSkel.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Início do documento
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\counterwithout{lstlisting}{chapter}
%--------------------------------------------------------
% Elementos pré-textuais
\capa
\folhaderosto % Se nao quiser imprimir a ficha, é só năo usar o
\includepdf{fichaCatalografica}
\folhaaprovacao
% \include{dedicatoria}
% \paginadedicatoria
\paginaagradecimento
\paginaepigrafe
\paginaresumo
\paginaabstract
\listadefiguras
% \listadetabelas
% \listadeabreviaturas

\printnoidxglossary[type=\acronymtype]

% \listadesimbolos
\sumario
% Retira espaço extra obsoleto entre as frases.
% \frenchspacing

% ----------------------------------------------------------
% ELEMENTOS PRÉ-TEXTUAIS
% ----------------------------------------------------------
% \pretextual

% ---
% Capa
% ---
% \imprimircapa
% ---

% ---
% Folha de rosto
% (o * indica que haverá a ficha bibliográfica)
% ---
% \imprimirfolhaderosto

% \include{ficha}
%\include{errata}
%\include{folhaaprova}
%\include{dedicatoria}
% \include{agradecimentos}
%\include{epigrafe}
% \include{resumos}
% ---
% inserir lista de ilustrações
% ---
% \pdfbookmark[0]{\listfigurename}{lof}
% \listoffigures*
% \cleardoublepage
%% ---

% ---
% inserir lista de tabelas
% ---
%\pdfbookmark[0]{\listtablename}{lot}
%\listoftables*
%\cleardoublepage
% ---
% \printnoidxglossaries
% \cleardoublepage
% ---
% inserir o sumario
%% ---
% \pdfbookmark{\contentsname}{toc}
% \tableofcontents*
% \cleardoublepage
%% ---



% ----------------------------------------------------------
% ELEMENTOS TEXTUAIS
% ----------------------------------------------------------
% \textual

% \glsresetall

\input{chapters/cap1}
\input{chapters/cap2}
\input{chapters/cap3}
\input{chapters/cap4}
\input{chapters/cap5}
\input{chapters/cap6}

% ----------------------------------------------------------
% Finaliza a parte no bookmark do PDF
% para que se inicie o bookmark na raiz
% e adiciona espaço de parte no Sumário
% ----------------------------------------------------------
% \phantompart

% ---
% Conclusão
% ---
%\chapter{Conclusão}
% ---

% ----------------------------------------------------------
% ELEMENTOS PÓS-TEXTUAIS
% ----------------------------------------------------------
% \postextual
% ----------------------------------------------------------

% ----------------------------------------------------------
% Referências bibliográficas
% ----------------------------------------------------------
\bibliographystyle{ufsc-alf}
\bibliography{bibliography}
% \addbibresource{bibliography.bib}
% \printbibliography

% ----------------------------------------------------------
% Glossário
% ----------------------------------------------------------
%
% Consulte o manual da classe abntex2 para orientações sobre o glossário.
%
%\glossary


\anexo
\chapter{Implementação com o PSkel-MPPA}
\label{Anex:Implementacao}
\input{appendix/implementation/appendixImpl}

\chapter{Artigo científico}

\includepdf[pages=-]{paper/main}
%\input{cap7}
%---------------------------------------------------------------------
% INDICE REMISSIVO
%---------------------------------------------------------------------
% \phantompart
% \printindex
%---------------------------------------------------------------------
\lstset{language=C++,
    basicstyle=\scriptsize,
    breaklines=true,
    tabsize=4,
	frame=single,
	stepnumber=1,
	numbersep=0.75em,
    keywordstyle=\color{blue}\ttfamily,
    rulecolor=\color{black},
    stringstyle=\color{red}\ttfamily,
    commentstyle=\color{green}\ttfamily,
    morecomment=[l][\color{magenta}]{\#}
}
\chapter{Código Fonte}

\lstinputlisting[language=C++, label=l1,caption=PSkelArray.h]{./appendix/code/PSkelArray.h}
\lstinputlisting[language=C++, label=l2,caption=PSkelArray.hpp]{./appendix/code/PSkelArray.hpp}
\lstinputlisting[language=C++, label=l3,caption=PSkelStencil.h]{./appendix/code/PSkelStencil.h}
\lstinputlisting[language=C++, label=l4,caption=PSkelStencil.hpp]{./appendix/code/PSkelStencil.hpp}
\lstinputlisting[language=C++, label=l5,caption=interface\_mppa.h]{./appendix/code/interface_mppa.h}
\lstinputlisting[language=C++, label=l6,caption=interface\_mppa.c]{./appendix/code/interface_mppa.c}

\end{document}
